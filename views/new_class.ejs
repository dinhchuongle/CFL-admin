<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Th√™m l·ªõp m·ªõi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-4">
    <a href="/class" class="btn btn-secondary mb-3">‚Üê Quay l·∫°i danh s√°ch l·ªõp</a>

    <h3>üìö Th√™m l·ªõp m·ªõi</h3>

    <form method="POST" action="/class/new" id="classForm">
      <div class="mb-3">
        <label class="form-label">T√™n l·ªõp</label>
        <input type="text" class="form-control" name="name" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Ng√†y khai gi·∫£ng</label>
        <input type="date" class="form-control" name="startDate" required>
      </div>

      <div class="mb-3">
        <label class="form-label">S·ªë tu·∫ßn h·ªçc</label>
        <input type="number" class="form-control" name="durationWeeks" min="1" required>
      </div>

      <div class="mb-3">
        <label class="form-label">L·ªãch h·ªçc (v√≠ d·ª•: T2, T5)</label>
        <input type="text" class="form-control" name="schedule" id="scheduleInput" required>
        <small class="text-muted">Nh·∫≠p c√°c ng√†y, v√≠ d·ª•: T2, T5, T7</small>
      </div>

      <div id="teachersPerSessionFields" class="mb-3">
        <!-- C√°c √¥ ch·ªçn gi√°o vi√™n theo bu·ªïi s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông t·∫°o ·ªü ƒë√¢y -->
      </div>

      <div class="mb-3">
        <label class="form-label">Link Zoom</label>
        <input type="url" class="form-control" name="zoomLink">
      </div>

      <div class="mb-3">
        <label class="form-label">Link nh√≥m Zalo</label>
        <input type="url" class="form-control" name="zaloGroup">
      </div>

      <div class="mb-3">
        <label class="form-label">Ch∆∞∆°ng tr√¨nh h·ªçc</label>
        <input type="text" class="form-control" name="program">
      </div>

      <input type="hidden" name="teachersPerSession" id="teachersPerSession">

      <button type="submit" class="btn btn-primary">Th√™m l·ªõp</button>
    </form>
  </div>

  <script>
    // Danh s√°ch gi√°o vi√™n m·∫´u - b·∫°n c√≥ th·ªÉ l·∫•y t·ª´ database sau n√†y
    const teachersList = ["GV A", "GV B", "GV C", "GV D"];

    const scheduleInput = document.getElementById("scheduleInput");
    const teachersPerSessionFields = document.getElementById("teachersPerSessionFields");
    const teachersPerSessionInput = document.getElementById("teachersPerSession");

    scheduleInput.addEventListener("blur", () => {
      const days = scheduleInput.value.replace(/-/g, ",").split(",").map(d => d.trim()).filter(Boolean);
      teachersPerSessionFields.innerHTML = "";

      days.forEach(day => {
        const div = document.createElement("div");
        div.className = "mb-2";

        const label = document.createElement("label");
        label.className = "form-label";
        label.innerText = `Gi√°o vi√™n cho ${day}`;

        const select = document.createElement("select");
        select.className = "form-select teacher-select";
        select.dataset.day = day;

        teachersList.forEach(teacher => {
          const option = document.createElement("option");
          option.value = teacher;
          option.innerText = teacher;
          select.appendChild(option);
        });

        div.appendChild(label);
        div.appendChild(select);
        teachersPerSessionFields.appendChild(div);
      });
    });

    document.getElementById("classForm").addEventListener("submit", (e) => {
      const teacherSelects = document.querySelectorAll(".teacher-select");
      const teachersPerSession = [];

      teacherSelects.forEach(select => {
        teachersPerSession.push({
          day: select.dataset.day,
          teacher: select.value
        });
      });

      teachersPerSessionInput.value = JSON.stringify(teachersPerSession);
    });
  </script>
</body>
</html>
